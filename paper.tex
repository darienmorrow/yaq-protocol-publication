\documentclass{article}
\usepackage[letterpaper, margin=1in]{geometry}

\title{The yaq Project: a Protocol for Scientific Instrumentation}
\author{Kyle F. Sunden,
  John C. Wright,
  Blaise J. Thompson}

\begin{document}

\maketitle

\section{Abstract}

\section{Introduction}

Instrumentation development is a key part of the scientific enterprise.
Scientists have always relied on their creativity and wit to assemble new instruments capable of carrying out new experimental procedures.
As the scientific industry has advanced, scientists are increasingly able to directly purchase pieces of their instruments.
A modern instrument might contain a motor from company A, a sensor from company B, a specialty light source from company C, and a totally custom robotic sample stage.
The brand new scientific instrument, doing a brand new experiment, is cobbled together from a few dozen pieces of hardware, some brand new and some reused.
The instrumental novelty arises from the creative way that all of those pieces are assembled and controlled in the context of the experiment.

Software integration can be a frustrating piece of the modern instrument development process.
Each individual component has its own drivers and interface.
A lack of standards means that each scientist must develop her own instrument control application.
Weeks can be spent just integrating one new component into an existing project.
Code reusability is typically poor, and technical debt grows quickly in academic and educational contexts.
Sientists may struggle to rapidly innovate on their experimental design when each hardware addition requires major software development.

Briefly, we
Minimum viable capabilities for desired protocol.
Focus on making client development easy.
\begin{itemize}
  \item Networked machines (subitem--multilingual)
  \item Unified interface (traits)
  \item Self describing
  \item Built on exisiting protocols
  \item Reusable
  \item Synchronous clients
  \item Portable, easy to install
  \item Interface agnostic. Not just serial. Certainly not just SCPI.
\end{itemize}
Well defined, concrete interface.
Static interface.

There are several large exisiting open source hardware interface projects, such as EPICS \cite{DalesioLR1991a}, TANGO \cite{tango-controls.org}, and pymodaq \cite{WeberSebastien2021a}.
These projects are impressive at facility scale, but in our experience these do not scale well to single-investigator lab environments.
We have aimed to keep yaq as simple as possible, with the goal of staying easy to manage at very small scales without dedicated staff.
Certainly yaq lacks features compared to these exisiting projects, as we will highlight.

There are exisiting open source hardware interface projects with a focus on simplicity [cite INSTRBUILDER etc].
To our knowledge none of these meet the minimal capabilities as outlined above.

Overview of this publication.
yaq is a protocol.
yaq is an implementation that runs as a stand-alone daemon.
yaq has a variety of clients.
yaq is not opinonated about orchestration layer.

\section{Protocol}

TCP

\subsection{TCP}

\subsection{Avro RPC}

AVRO-RPC

\subsection{Configuration and State}

configuration

\section{Daemons}

Daemon roundup.

Discussion of traits and purpose of compositional approach.

\subsection{Traits}

Graphic of traits?

Examples of daemons for core traits.

Fakeable.

\section{Clients}

A few ``short stories'' of particular instruments utilizing yaq.

\subsection{yaqc}

Lightweight scriptable.

\subsection{yaqc-qtpy}

Capitalizes heavily on traits

\subsection{Bluesky}

Bluesky is an extensive open source control layer \cite{AllanDanielB2019a}.
Bridging to larger open source control layers.

\section{Case Studies}

\subsection{Stahl}

Self contained ecosystem on a raspberry pi.

Dedicated client application.

Exceedingly simple.

(reference publication)

\subsection{Wright}

\section{Conclusions}

\clearpage
\bibliographystyle{unsrt}
\bibliography{references}

\end{document}
